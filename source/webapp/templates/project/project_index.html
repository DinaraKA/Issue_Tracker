{% extends 'base.html' %}
{% block menu %}
    {% if perms.webapp.add_project %}
        <li><a href="{% url 'webapp:project_add' %}">Add Project</a></li>
    {% endif %}
{% endblock %}
{% block content %}
    <h2>Projects</h2>
    {% include 'partial/simple_search.html' %}
    <form method="POST" action="{% url 'webapp:project_index' %}">
        {% csrf_token %}
    {% if is_paginated %}
        {% include 'partial/pagination.html' %}
    {% endif %}
        <table class="table">
            <thead>
                <tr>
                    <th scope="col">#</th>
                    <th scope="col">Name</th>
                    {% if perms.webapp.change_project %}
                        <th class="symbol" scope="col">Update</th>
                    {% endif %}
                    {% if perms.webapp.delete_project %}
                        <th class="symbol" scope="col">Delete</th>
                    {% endif %}
                </tr>
            </thead>
            {% for project in projects %}
                <tbody>
                    <tr>
                        <th scope="row">{{ forloop.counter }}</th>
                        <td><a href="{% url 'webapp:project_view' project.pk %}">{{ project.name }}</a></td>
                        {% if perms.webapp.change_project %}
                            <td class="symbol"><a href="{% url 'webapp:project_update' project.pk %}">&#x270E;</a></td>
                        {% endif %}
                        {% if perms.webapp.delete_project %}
                            <td class="symbol"><a href="{% url 'webapp:project_delete' project.pk %}">X</a></td>
                        {% endif %}
                    </tr>
                </tbody>
            {% endfor %}
        </table>
    {% if is_paginated %}
        {% include 'partial/pagination.html' %}
    {% endif %}
    </form>
{% endblock %}